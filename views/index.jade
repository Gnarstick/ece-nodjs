extend layout 

block head 
  link(rel="stylesheet", href="/css/bootstrap.min.css")
  link(rel="stylesheet", href="/css/global.css")
  script(src="/js/jquery-2.1.4.min.js")
  script(src="/js/bootstrap.min.js")
  script(src="//d3js.org/d3.v3.min.js")

block content 
  div.container
    div.col-md-6.col-md-offset-3.bou
      button.btn.btn-success#get-metrics Hello world
      #content
  
  script
    :coffee-script
      $('#get-metrics').click (e) ->
        e.preventDefault()
        $.getJSON '/metrics.json', (data) ->
          $('#content').empty()
          c = ""
          widthaxe = 1150
          heightaxe = 500
          doc = d3.select ".bou" 
          svg = doc.append "svg"
            .attr "width", widthaxe
            .attr "height", heightaxe
          .append "g"
            .attr "transform", "translate(" + 100 + "," + 20 + ")";
          x = d3.scale.linear ""
            .range [0, widthaxe-150]
          y = d3.scale.linear ""
            .range [heightaxe, 0]
          x.domain([0,20]).nice()
          y.domain([1448965800000,1448967300000]).nice()
          svg.append("g")
            .attr "class", "x axis"
            .attr "transform", "translate(0," + 450 + ")"
            .call d3.svg.axis().scale(x).orient "bottom";
          svg.append("g")
            .attr "class", "y axis"
            .call d3.svg.axis().scale(y).orient "left";
          for metric in data 
            c += "<p>timestamp: #{metric.timestamp}<br/>value: #{metric.value}</p>"
          $('#content').append c